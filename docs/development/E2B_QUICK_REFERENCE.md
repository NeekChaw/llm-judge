# E2Bä»£ç æ‰§è¡ŒåŠŸèƒ½å¿«é€Ÿå‚è€ƒ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨å¼€å‘ç¯å¢ƒ
```bash
npm run dev
```

### 2. åˆ›å»ºE2Bè¯„æµ‹ä»»åŠ¡
1. è®¿é—®ï¼š`http://localhost:3000/workbench/tasks/new`
2. é€‰æ‹©æ¨¡æ¿ï¼š`å®Œæ•´ä»£ç ç”Ÿæˆè¯„æµ‹ï¼ˆE2Bæ‰§è¡Œç‰ˆï¼‰`
3. è¾“å…¥æµ‹è¯•ç”¨ä¾‹ï¼š`è¯·ç¼–å†™ä¸€ä¸ªPythonå‡½æ•°æ¥è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬né¡¹`
4. é€‰æ‹©æ¨¡å‹ï¼š`Pro/deepseek-ai/DeepSeek-V3`
5. æäº¤ä»»åŠ¡

### 3. æŸ¥çœ‹æ‰§è¡Œç»“æœ
- ç­‰å¾…ä»»åŠ¡å®Œæˆï¼ˆé€šå¸¸10-30ç§’ï¼‰
- æŸ¥çœ‹CODEè¯„åˆ†å™¨ç»“æœï¼ˆçœŸå®ä»£ç æ‰§è¡Œå’Œè¯„åˆ†ï¼‰
- æŸ¥çœ‹PROMPTè¯„åˆ†å™¨ç»“æœï¼ˆåŸºäºæ‰§è¡Œç»“æœçš„è´¨é‡åˆ†æï¼‰
- å±•å¼€"ä»£ç æ‰§è¡Œè¯¦æƒ…"æŸ¥çœ‹å®Œæ•´ä¿¡æ¯

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½

### CODEè¯„åˆ†å™¨
- **åŠŸèƒ½**: åœ¨E2Bæ²™ç›’ä¸­å®é™…æ‰§è¡ŒLLMç”Ÿæˆçš„ä»£ç 
- **è¯„åˆ†**: è¯­æ³•å±‚(50åˆ†) + åŠŸèƒ½å±‚(50åˆ†) + æ€§èƒ½åŠ åˆ†(10åˆ†)
- **è¾“å‡º**: æ‰§è¡Œè¯¦æƒ…ã€æµ‹è¯•ç»“æœã€æ€§èƒ½æŒ‡æ ‡

### PROMPTè¯„åˆ†å™¨
- **åŠŸèƒ½**: åŸºäºä»£ç æ‰§è¡Œç»“æœè¿›è¡Œæ™ºèƒ½è´¨é‡åˆ†æ
- **è¾“å…¥**: é€šè¿‡ç³»ç»Ÿå˜é‡è·å–ä»£ç å’Œæ‰§è¡Œç»“æœ
- **è¾“å‡º**: ç»¼åˆè´¨é‡è¯„ä¼°å’Œæ”¹è¿›å»ºè®®

### ç³»ç»Ÿå˜é‡
- `{{test_case_input}}` - æµ‹è¯•ç”¨ä¾‹è¾“å…¥
- `{{model_response}}` - LLMç”Ÿæˆçš„ä»£ç 
- `{{code_execution_result}}` - ä»£ç æ‰§è¡Œç»“æœ

## ğŸ“Š æ•°æ®ç»“æ„

### ä»£ç æ‰§è¡Œè¯¦æƒ…
```json
{
  "sandbox_id": "session_xxx",
  "stdout": "æ‰§è¡Œè¾“å‡º",
  "stderr": "é”™è¯¯è¾“å‡º", 
  "execution_time_ms": 1200,
  "memory_usage_mb": 15.3,
  "exit_code": 0,
  "test_results": {
    "passed": 3,
    "total": 3,
    "syntax_correct": true,
    "functional_correct": true
  }
}
```

### è¯„åˆ†ç»“æœ
```json
{
  "score": 85,
  "justification": "âœ… ä»£ç è¯­æ³•æ­£ç¡®ï¼Œæ‰§è¡ŒæˆåŠŸ\nâœ… åŠŸèƒ½æµ‹è¯•é€šè¿‡ (3/3)\nâš¡ æ‰§è¡Œæ•ˆç‡è‰¯å¥½ (+5åˆ†)",
  "executionDetails": { /* è¯¦ç»†æ‰§è¡Œä¿¡æ¯ */ }
}
```

## ğŸ› ï¸ é…ç½®ç®¡ç†

### CODEè¯„åˆ†å™¨é…ç½®
```json
{
  "name": "Pythonä»£ç æ‰§è¡Œå™¨",
  "type": "CODE",
  "config": {
    "language": "python",
    "timeout": 30000,
    "testCases": [
      {
        "name": "åŸºæœ¬åŠŸèƒ½æµ‹è¯•",
        "input": "10",
        "expectedOutput": "55",
        "description": "æµ‹è¯•æ–æ³¢é‚£å¥‘æ•°åˆ—ç¬¬10é¡¹"
      }
    ]
  }
}
```

### PROMPTè¯„åˆ†å™¨é…ç½®
```json
{
  "name": "æ™ºèƒ½ä»£ç è´¨é‡åˆ†æå™¨",
  "type": "PROMPT", 
  "config": {
    "evaluation_prompt": "è¯·è¯„ä¼°ä»£ç è´¨é‡ï¼š\næµ‹è¯•ç”¨ä¾‹: {{test_case_input}}\nä»£ç : {{model_response}}\næ‰§è¡Œç»“æœ: {{code_execution_result}}",
    "output_parser": {
      "type": "regex",
      "pattern": "è¯„åˆ†[ï¼š:]\\s*(\\d+)"
    }
  }
}
```

## ğŸ§ª æµ‹è¯•å’Œè°ƒè¯•

### åŠŸèƒ½æµ‹è¯•
```bash
# å®Œæ•´åŠŸèƒ½æµ‹è¯•
npx tsx scripts/test-all-fixes.ts

# åˆ†æCODEè¯„åˆ†å™¨
npx tsx scripts/analyze-code-evaluator.ts

# æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
npx tsx scripts/check-database.ts
```

### å¸¸è§é—®é¢˜æ’æŸ¥

#### é—®é¢˜1: ä»£ç æ‰§è¡Œè¯¦æƒ…æ˜¾ç¤ºN/A
**åŸå› **: æ•°æ®åº“å­—æ®µæ˜ å°„é”™è¯¯æˆ–æ‰§è¡Œè¯¦æƒ…ä¿å­˜å¤±è´¥
**è§£å†³**: 
```bash
npx tsx scripts/investigate-database-schema.ts
```

#### é—®é¢˜2: æµ‹è¯•ç”¨ä¾‹å…¨éƒ¨å¤±è´¥
**åŸå› **: æµ‹è¯•ä»£ç æ¨¡æ¿æˆ–å‡½æ•°æŸ¥æ‰¾é€»è¾‘æœ‰é—®é¢˜
**è§£å†³**:
```bash
npx tsx scripts/investigate-test-template.ts
```

#### é—®é¢˜3: PROMPTè¯„åˆ†å™¨æ˜¾ç¤ºç©ºæç¤ºè¯é”™è¯¯
**åŸå› **: è¯„åˆ†å™¨é…ç½®å­—æ®µåç§°ä¸åŒ¹é…
**è§£å†³**: ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„å­—æ®µåç§°ï¼ˆevaluation_promptã€prompt_templateã€promptï¼‰

#### é—®é¢˜4: å¤„ç†å™¨æ—¥å¿—çœ‹ä¸åˆ°
**è§£å†³**: 
```bash
tail -f .tmp/processor.log
```

## ğŸ“¡ APIæ¥å£

### ç›´æ¥æ‰§è¡Œä»£ç 
```bash
curl -X POST http://localhost:3000/api/e2b/execute \
  -H "Content-Type: application/json" \
  -d '{
    "code": "def fibonacci(n): return n if n <= 1 else fibonacci(n-1) + fibonacci(n-2)",
    "language": "python"
  }'
```

### è·å–æ‰§è¡Œè¯¦æƒ…
```bash
curl http://localhost:3000/api/evaluation-results/{id}/code-details
```

### æ£€æŸ¥å¤„ç†å™¨çŠ¶æ€
```bash
curl http://localhost:3000/api/processor
```

## ğŸ” ç›‘æ§å’Œæ—¥å¿—

### å®æ—¶ç›‘æ§
- å¤„ç†å™¨çŠ¶æ€ï¼š`curl http://localhost:3000/api/processor`
- ä»»åŠ¡è¿›åº¦ï¼šWebç•Œé¢å®æ—¶æ›´æ–°
- æ‰§è¡Œæ—¥å¿—ï¼š`.tmp/processor.log`

### å…³é”®æ—¥å¿—æ ‡è¯†
```
ğŸš€ å¼€å§‹å¤„ç†å­ä»»åŠ¡: XX
ğŸ”§ æ£€æµ‹åˆ°CODEç±»å‹è¯„åˆ†å™¨ï¼Œå¯åŠ¨E2Bä»£ç æ‰§è¡Œ...
âœ… CODEè¯„åˆ†å™¨å¤„ç†å®Œæˆ: XX/100
ğŸ¤– å¼€å§‹PROMPTç±»å‹è¯„åˆ†å™¨å¤„ç†...
âœ… PROMPTè¯„åˆ†å™¨å¤„ç†å®Œæˆ: XX/100
ğŸ“Š å¼€å§‹ä¿å­˜ä»£ç æ‰§è¡Œè¯¦æƒ…...
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. æµ‹è¯•ç”¨ä¾‹è®¾è®¡
- åŒ…å«è¾¹ç•Œæ¡ä»¶æµ‹è¯•ï¼ˆn=0, n=1ï¼‰
- åŒ…å«åŸºæœ¬åŠŸèƒ½æµ‹è¯•ï¼ˆn=10ï¼‰
- è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´ï¼ˆ5-30ç§’ï¼‰

### 2. è¯„åˆ†å™¨é…ç½®
- CODEè¯„åˆ†å™¨ï¼šä¸“æ³¨äºæ‰§è¡Œå’ŒåŠŸèƒ½éªŒè¯
- PROMPTè¯„åˆ†å™¨ï¼šä¸“æ³¨äºä»£ç è´¨é‡å’Œé£æ ¼åˆ†æ
- åˆç†è®¾ç½®æƒé‡æ¯”ä¾‹ï¼ˆå»ºè®®6:4ï¼‰

### 3. æ€§èƒ½ä¼˜åŒ–
- é¿å…è¿‡äºå¤æ‚çš„æµ‹è¯•ç”¨ä¾‹
- åˆç†è®¾ç½®è¶…æ—¶æ—¶é—´
- ç›‘æ§æ²™ç›’èµ„æºä½¿ç”¨

### 4. é”™è¯¯å¤„ç†
- æ£€æŸ¥è¯„åˆ†å™¨é…ç½®çš„å®Œæ•´æ€§
- éªŒè¯æ•°æ®åº“è¡¨ç»“æ„
- ç›‘æ§å¤„ç†å™¨è¿è¡ŒçŠ¶æ€

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **è¯¦ç»†å¼€å‘æ—¥å¿—**: `docs/E2B_DEVELOPMENT_LOG.md`
- **æŠ€æœ¯æ¶æ„**: `docs/E2B_ARCHITECTURE.md`
- **ä¸»è¦README**: `README.md`

## ğŸ‰ åŠŸèƒ½çŠ¶æ€

- âœ… **E2Bä»£ç æ‰§è¡Œ**: å®Œå…¨å®ç°å¹¶éªŒè¯
- âœ… **å¤šå±‚æ¬¡è¯„åˆ†**: è¯­æ³•+åŠŸèƒ½+æ€§èƒ½
- âœ… **æ‰§è¡Œè¯¦æƒ…å±•ç¤º**: å®Œæ•´çš„å¯è§†åŒ–ç•Œé¢
- âœ… **ç³»ç»Ÿå˜é‡æ”¯æŒ**: PROMPTè¯„åˆ†å™¨ååŒå·¥ä½œ
- âœ… **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œè°ƒè¯•
- âœ… **æ€§èƒ½ç›‘æ§**: å®æ—¶çŠ¶æ€å’ŒæŒ‡æ ‡ç›‘æ§

---

**ğŸ¯ ç°åœ¨æ‚¨å¯ä»¥ä½“éªŒå®Œæ•´çš„E2Bä»£ç æ‰§è¡Œ + æ™ºèƒ½è¯„åˆ†åŠŸèƒ½äº†ï¼**
